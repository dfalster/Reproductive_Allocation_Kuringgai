packages:
  - stringr
  - smatr
  - plyr
  - tidyr
  - dplyr
  - xtable
  - igraph
  - rmarkdown
  - broom

sources:
  - R

include:
  - remake_species_data.yml

plot_options:
  tall:
    width: 4
    height: 8
  extra_wide:
    width: 15
    height: 5
  wide:
    width: 8
    height: 4
  small_square:
    width: 4
    height: 4
  med_square:
    width: 6
    height: 6
  large_square:
    width: 8
    height: 8

targets:
  all:
    depends:
      - results.html

  results.html:
    command: render("results.md", output_format = I("html_document"))

  CarbonInvestments.pdf:
    depends:
      - "CarbonInvestments.Rnw"
      - figures
    command: tex_2_pdf("CarbonInvestments.tex")

  # Data --------------------------------------
  IndividualsList:
    command: read_csv("data/individuals.csv")

  FlowerPartsData:
    command: read_csv("data/flowerParts.csv")

  Reproduction_raw:
    command: read_csv("data/reproduction.csv")

  ReproductionData:
    command: filterForAllocation(Reproduction_raw, IndividualsList)

  HarvestData_raw:
    command: read_csv("data/harvest.csv")

  HarvestData:
    command: preprocessHarvest(HarvestData_raw, IndividualsList)

  FloweringCategories:
    command: read_csv("data/flowerCategories.csv")

  MultiplierTable:
    command: read_csv("data/multiplierTable.csv")

  InvestmentCategories:
    command: read_csv("data/accessoryParts.csv")

  LMA:
    command:
      - read_csv("data/LMA.csv")
      - process_LMA(.)

  woodDensity_raw:
    command: read_csv("data/woodDensity.csv")

  seedsize:
    command:
      - read_csv("data/seedsize.csv")
      - process_seed_costs(., PartsSummary_all)

  leafLifespan_raw:
    command: read_csv("data/leaderGrowthLL.csv")

  leavesPerLength_raw:
    command: read_csv("data/leaves_per_length.csv")

  figures:
    depends:
      - figure/RA_comparison_age.pdf
      - figure/RA_comparison_diam.pdf
      - figure/RA_comparison_weight.pdf

  figure/RA_comparison_age.pdf:
    command: plot_ReproductionAllocation_comparison_age(ReproductionAllocation_all)
    plot: wide
  figure/RA_comparison_diam.pdf:
    command: plot_ReproductionAllocation_comparison_diam(ReproductionAllocation_all)
    plot: wide
  figure/RA_comparison_weight.pdf:
    command: plot_ReproductionAllocation_comparison_weight(ReproductionAllocation_all)
    plot: wide
