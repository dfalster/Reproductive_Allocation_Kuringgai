```{r, echo=FALSE,results='hide', message=FALSE}
library(remake)
create_bindings()
source("scripts/summary_dataframes.R")
```
# What causes RA to shift with age in species?
Theoretical models indicate that there need to be size (or age) related shifts in *some* trade-off to create graded RA schedules.

For instance, shifts in a variable such as leaf lifespan, fecundity per RA, photosynthetic rates with size (or other variables) will change the RA schedule.

I have both RA schedules and lots of other data across multiple ages:
- leaf lifespan
- LMA
- accessory tissue costs

# Next steps?
As I begin to analyze RA patterns, think more specifically about the species that do show a distinct change with age in one of hte "leaf" parameters.

For instance, is there some way to capture "change with age" as a variabe of its own that is worth comparing across species.

Afterall, the energy allocation models suggest that different RA schedules may be due to different amounts of "shifting" across species - some species might be predicted to shift more than others.

#22 April 2015
Generic code to create plots, run lm, summarize results, by species

```{r, echo=FALSE,results='hide', message=FALSE}
plot_yvar_vs_xvar <- function(data, yvar = "y", xvar = "x", ...) {
  Y <- data[[yvar]]
  X <- data[[xvar]]
  plot(Y ~ X, data=data,  cex.axis=.8, las=1, pch=16, ...)
}

summarise_fit <- function(x) {
  data.frame(
    select(glance(x), r.squared, p.value),
    n= length(resid(x)),
    a = coef(x)[1],
    b = coef(x)[2]
  )
}

summarise_all_fits <- function(x) {
  tmp <- lapply(x, summarise_fit) %>%
    bind_rows
  data.frame(species=names(x), tmp)
}
```

